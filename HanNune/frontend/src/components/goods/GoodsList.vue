<template>
    <div id="app">
        <v-app id="inspire">
            <v-card
                cols="12"
            >
                <v-container>
                    <v-row dense>
                        <v-col
                            v-for="(item, i) in items"
                            :key="i"
                        >
                            <v-card
                                :color="item.color"
                                dark
                            >
                                <div class="d-flex flex-no-wrap justify-space-between">
                                    <v-col cols="3">
                                        <v-avatar
                                            class="ma-1"
                                            width="200"
                                            height="400"
                                            tile
                                            >

                                            <!-- <v-img :src="item.src"></v-img> -->
                                            <v-img :src="item.god_img_url"></v-img>
                                        </v-avatar>
                                    </v-col>
                                    <v-col cols="7">
                                        <v-card-title
                                            class="text-h5"
                                            v-text="item.godNm"
                                        ></v-card-title>
                                        <v-card-subtitle v-text="item.godNo"></v-card-subtitle>
                                        <v-divider></v-divider>
                                        <!-- <v-card-text>{{item.erpGodNo}}</v-card-text> -->
                                        <!-- <v-card-actions> -->
                                            <!-- <v-btn
                                            v-if="item.artist === 'Ellie Goulding'"
                                            class="ml-2 mt-3"
                                            fab
                                            icon
                                            height="40px"
                                            right
                                            width="40px"
                                            >
                                            <v-icon>mdi-play</v-icon>
                                            </v-btn>
                                            <v-btn
                                            icon
                                            @click="item.show = !item.show"
                                            >
                                            <v-icon>{{ item.show ? 'mdi-chevron-up' : 'mdi-chevron-down' }}</v-icon>
                                            </v-btn> -->
                                        <!-- </v-card-actions> -->
                                        <!-- <v-expand-transition> -->
                                        <v-card-actions>
                                                <!-- <v-divider></v-divider> -->
                                                <!-- <v-card-text> -->
                                                &nbsp;<span class="text--lighten-4 text-caption mr-2">Í≥†Í∞ù Î¶¨Î∑∞
                                                    <span class="font-weight-bold">
                                                        ({{item.totCnt}}Í∞ú) 
                                                        &nbsp;<span style="color: #F44336;">{{item.customerCnt}}</span>
                                                    </span>
                                                </span>
                                                <v-rating ting
                                                :value="item.customerCnt"
                                                :background-color="item.ratingColor"
                                                :color="item.ratingColor"
                                                dense
                                                half-increments
                                                readonly
                                                size="20"
                                                ></v-rating>
                                                <!-- </v-card-text> -->
                                        <!-- </v-expand-transition> -->
                                        </v-card-actions>
                                        <v-card-actions>
                                                <!-- <v-divider></v-divider> -->
                                                <!-- <v-card-text> -->
                                                &nbsp;<span class="text--lighten-4 text-caption mr-2">Î≤†Ïä§Ìä∏ Î¶¨Î∑∞
                                                    <span class="font-weight-bold">
                                                        ({{item.best_totCnt}}Í∞ú)
                                                        &nbsp;<span style="color: #2196F3;">{{item.bestCnt}}</span>
                                                    </span>
                                                </span>
                                                <v-rating ting
                                                :value="item.bestCnt"
                                                :background-color="item.bestRatingColor"
                                                :color="item.bestRatingColor"
                                                dense
                                                half-increments
                                                readonly
                                                size="20"
                                                ></v-rating>
                                                <!-- </v-card-text> -->
                                        <!-- </v-expand-transition> -->
                                        </v-card-actions>
                                        <v-card-actions>
                                                <!-- <v-divider></v-divider> -->
                                                <!-- <v-card-text> -->
                                                &nbsp;<span class="text--lighten-4 text-caption mr-2">Í∏çÏ†ï ÏßÄÏàò
                                                    <span class="font-weight-bold">
                                                        ({{item.total}}Í∞ú)
                                                        &nbsp;<span style="color: #00897B;">{{item.emotion}}</span>
                                                    </span>
                                                </span>
                                                <v-rating ting
                                                :value="item.emotion"
                                                :background-color="item.positiveColor"
                                                :color="item.positiveColor"
                                                dense
                                                half-increments
                                                readonly
                                                size="20"
                                                ></v-rating>
                                                <!-- </v-card-text> -->
                                        <!-- </v-expand-transition> -->
                                        </v-card-actions>
                                        <!-- <router-link to="/goods/detail" style="text-decoration:none;"> -->
                                            <v-card-actions>
                                                <v-chip
                                                    class="ma-2"
                                                    color="#FFFFFF"
                                                    outlined
                                                    @click="moveDetailPage(i)"
                                                    >
                                                    <v-icon left>
                                                        mdi-label
                                                    </v-icon>
                                                    ÏÉÅÌíà Î∂ÑÏÑù ÎîîÌÖåÏùº üîú
                                                </v-chip>
                                            </v-card-actions>
                                        <!-- </router-link> -->
                                    </v-col>
                                </div>
                            </v-card>
                        </v-col>
                        <!-- <v-dialog
                            v-model="dialog"
                            scrollable
                            max-width="300px"
                        >
                            <template v-slot:activator="{ on, attrs }">
                                <v-card-actions>
                                    <v-btn
                                        elevation="2"
                                        outlined
                                        v-bind="attrs"
                                        v-on="on"
                                        >ÎπÑÏú®Î∂ÑÏÑù
                                        {{dialog}}
                                    </v-btn>
                                </v-card-actions>
                            </template>
                            <v-card>
                                <v-card-title class="text-h5 grey lighten-2">
                                    Privacy Policy {{dialog}}
                                </v-card-title>
                                <v-card-text>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                </v-card-text>
                                <v-divider></v-divider>
                                <v-card-actions>
                                    <v-spacer></v-spacer>
                                    <v-btn
                                    color="primary"
                                    text
                                    @click="hideDialog"
                                    >
                                    {{dialog}}
                                    </v-btn>
                                </v-card-actions>
                            </v-card>
                        </v-dialog> -->
                    </v-row>
                </v-container>
            </v-card>
            <div >
                <canvas id="myChart"></canvas>
            </div>

        </v-app>
    </div>
</template>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script src="https://unpkg.com/vue-chartjs/dist/vue-chartjs.min.js"></script>
<script>
import axios from 'axios'
export default {
    name:"goodsList",
    data: () => ({
        items: [],
        reviewTotCnt:[],
        review:[],
        dialog: false,
        showDialog : false
    }),
    created(){
        this.selectGod()
    },
    methods:{
        selectGod(){
            axios.get("http://127.0.0.1:8000/emotion/goods/total/score/")
            .then((result)=>{
                // console.log("goods>>> ", result.data)
                for(var i =0; i<result.data.length; i++){
                    var color = "#F8BBD0";
                    var rColor = "red";
                    var bestRatingColor = "blue"
                    var positiveColor = "teal darken-1"
                    if(i%2!=0){
                        color = "#9DC3E6";
                    }
                    this.items.push({
                        godNm: result.data[i].god_nm,
                        godNo:result.data[i].god_no,
                        erpGodNo: result.data[i].erp_god_no,
                        evl1_cnt: result.data[i].evl1_cnt,
                        evl2_cnt: result.data[i].evl2_cnt,
                        evl3_cnt: result.data[i].evl3_cnt,
                        evl4_cnt: result.data[i].evl4_cnt,
                        evl5_cnt: result.data[i].evl5_cnt,
                        emotion: parseInt(((result.data[i].positive+result.data[i].power_positive)/
                                        (result.data[i].total))*100)*5/100,
                        best_evl1_cnt: result.data[i].best_evl1_cnt,
                        best_evl2_cnt: result.data[i].best_evl2_cnt,
                        best_evl3_cnt: result.data[i].best_evl3_cnt,
                        best_evl4_cnt: result.data[i].best_evl4_cnt,
                        best_evl5_cnt: result.data[i].best_evl5_cnt,
                        best_totCnt : result.data[i].best_evl5_cnt+result.data[i].best_evl4_cnt+result.data[i].best_evl3_cnt+result.data[i].best_evl2_cnt+result.data[i].best_evl1_cnt,
                        bestCnt : parseInt(((result.data[i].best_evl1_cnt*1+result.data[i].best_evl2_cnt*2+result.data[i].best_evl3_cnt*3+result.data[i].best_evl4_cnt*4+result.data[i].best_evl5_cnt*5)/
                                        (result.data[i].best_evl1_cnt+result.data[i].best_evl2_cnt+result.data[i].best_evl3_cnt+result.data[i].best_evl4_cnt+result.data[i].best_evl5_cnt))*100)/100,
                        bestRatingColor : bestRatingColor,
                        god_no: result.data[i].god_nm,
                        id: result.data[i].god_nm,
                        negative: result.data[i].negative,
                        power_negative: result.data[i].power_negative,
                        neutrality: result.data[i].neutrality,
                        power_positive: result.data[i].power_positive,
                        positive: result.data[i].positive,
                        total: result.data[i].total,
                        color:color,
                        ratingColor:rColor,
                        positiveColor : positiveColor,
                        // show: true,
                        totCnt: result.data[i].evl1_cnt+result.data[i].evl2_cnt+result.data[i].evl3_cnt+result.data[i].evl4_cnt+result.data[i].evl5_cnt,
                        customerCnt: parseInt(((result.data[i].evl1_cnt*1+result.data[i].evl2_cnt*2+result.data[i].evl3_cnt*3+result.data[i].evl4_cnt*4+result.data[i].evl5_cnt*5)/
                                        (result.data[i].evl1_cnt+result.data[i].evl2_cnt+result.data[i].evl3_cnt+result.data[i].evl4_cnt+result.data[i].evl5_cnt))*100)/100,
                        god_img_url : "https://cdn.hfashionmall.com"+result.data[i].god_img+"RGINL.jpg?RS=960x960&AR=0&CS=640x960"
                    })
                }
                // console.log(this.items)
            })
        },
        moveDetailPage(idx){
            console.log(this.items[idx].godNo)
            this.$router.push({
                name : 'goods-detail',
                params: {
                    id: this.items[idx].godNo,
                    item : this.items[idx]
                }
            })
        }
    }
}
</script>
<style>
.v-title {
    font-family: 'Do Hyeon', sans-serif;
}
</style>